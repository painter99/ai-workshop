## Session: File Handling Mastery & Persistence (2026-01-11)

### TechnickÃ© koncepty a implementace

**1. File Modes (ReÅ¾imy souborÅ¯)**
- **`"r"` (read):** Pouze ÄtenÃ­ obsahu. VyvolÃ¡ `FileNotFoundError`, pokud soubor neexistuje.
- **`"w"` (write):** ZÃ¡pis nebo pÅ™epsÃ¡nÃ­ souboru. VytvoÅ™Ã­ soubor, pokud neexistuje. **PÅ™epÃ­Å¡e** existujÃ­cÃ­ obsah.
- **`"a"` (append):** PÅ™idÃ¡nÃ­ na konec souboru. IdeÃ¡lnÃ­ pro logovÃ¡nÃ­ nebo pÅ™idÃ¡vÃ¡nÃ­ zÃ¡znamÅ¯.

**2. Context Managers (`with open()` Statement)**
- Automaticky zavÃ­rÃ¡ soubor po dokonÄenÃ­ bloku (i pÅ™i vÃ½jimce).
- **VÃ½hody:** BezpeÄnÄ›jÅ¡Ã­ neÅ¾ manuÃ¡lnÃ­ `open()`/`close()`. ZabraÅˆuje resource leaks.
- Syntax: `with open("file.txt", "r") as f: content = f.read()`

**3. File Methods (Metody souborÅ¯)**
- **`.read()`:** PÅ™eÄte celÃ½ obsah jako jeden `str`.
- **`.readlines()`:** PÅ™eÄte Å™Ã¡dky jako `list[str]` (kaÅ¾dÃ½ Å™Ã¡dek obsahuje `\n` na konci).
- **`.write(str)`:** ZapÃ­Å¡e string do souboru (NEPÅ˜IDÃVÃ `\n` automaticky).
- **`.writelines(list)`:** ZapÃ­Å¡e list Å™etÄ›zcÅ¯ (bez automatickÃ©ho `\n`).

**4. String Handling v Files**
- **Newline (`\n`):** KritickÃ© pro oddÄ›lenÃ­ Å™Ã¡dkÅ¯. PÅ™idÃ¡vat manuÃ¡lnÄ›: `write(item + "\n")`.
- **`.strip()`:** OdstranÃ­ bÃ­lÃ© znaky (`\n`, mezery) z Å™Ã¡dkÅ¯ po `readlines()`.
- **F-strings:** Interpolace pro dynamickÃ© nÃ¡zvy souborÅ¯: `f"{country}.txt"`.

**5. Iterace a Processing**
- **`zip(list1, list2)`:** SpojÃ­ iterables do tuple pÃ¡rÅ¯ pro paralelnÃ­ iteraci.
- **Tuple unpacking:** `for country, filename in zip(countries, filenames):`.
- **FiltrovÃ¡nÃ­:** `if "keyword" in item:` pro vyhledÃ¡vÃ¡nÃ­ v Å™Ã¡dcÃ­ch.

**6. Debugging & Best Practices**
- **Working Directory:** `os.getcwd()` pro kontrolu cwd. VS Code â‰  PyCharm (nastav `cd` nebo absolutnÃ­ cesty).
- **Trade-offs:** Append (`"a"`) = efektivnÃ­ pro logy; Read-Append-Write = flexibilnÃ­ pro validaci.
- **Sanitizace:** List comprehension: `[item.strip() for item in items if item.strip()]`.

### VyÅ™eÅ¡enÃ© problÃ©my (Bug-Fixing)
- **FileNotFoundError:** Soubor neexistuje v `"r"` mÃ³du â†’ PouÅ¾Ã­t `"w"`/`"a"` pro prvnÃ­ zÃ¡pis.
- **ChybÄ›jÃ­cÃ­ `\n`:** `write("text")` spojÃ­ Å™Ã¡dky â†’ Oprava: `write("text\n")`. âœ…
- **Wrong Mode:** `write()` v `"r"` mÃ³du â†’ `io.UnsupportedOperation` â†’ ZmÄ›na na `"w"`. âœ…
- **Variable Overwrite:** `country = f"{country}.txt"` ztratÃ­ pÅ¯vodnÃ­ hodnotu â†’ PouÅ¾Ã­t `filename = ...`. âœ…
- **Working Directory Mismatch:** Soubor se zapisuje jinde â†’ `cd` do projektu nebo `os.path.dirname(__file__)`. âœ…

### Blockers & Resolution
- **Working Directory Chaos:** VS Code terminÃ¡l v jinÃ©m cwd â†’ Å˜eÅ¡eno `cd /projekt` + `print(os.getcwd())`. âœ…
- **Append vs Overwrite:** `'w'` pÅ™epÃ­Å¡e data â†’ PouÅ¾itÃ­ `'a'` pro persistence. âœ…
- **Role-Play Pressure:** VysvÄ›tlenÃ­ konceptÅ¯ AnnÄ› â†’ Socratic struktura (naÄÃ­st, filtrovat `in`). âœ…

### Next Steps
- PÅ™echod na **Sekci 7: Optimize and Annotate Your Code (List Comprehensions and Code Comments)**.
- PrÃ¡ce s `json` modulem pro strukturovanou perzistenci.
- Error handling (`try-except FileNotFoundError`).
- Automatizace: Skripty pro batch processing souborÅ¯.

### Engineering Summary
"File handling nenÃ­ o syntaxi, ale o lifecycle dat: naÄÃ­st â†’ processovat â†’ persistovat bezpeÄnÄ›. `with open()` + `'a'` mÃ³d + explicitnÃ­ `\n` = robustnÃ­ persistence. RozumÄ›t trade-offÅ¯m (efektivita vs. flexibility) je klÃ­Ä k produkÄnÃ­mu kÃ³du."

---

**AbsolvovanÃ¡ lekce:** Sekce 6/57 (File Handling & Persistence) âœ…
**Role Play Goals:** 3/3 completed (store, retrieve, filter) ğŸ¯
**Key Takeaway:** `'w'` pÅ™epÃ­Å¡e, `'a'` pÅ™idÃ¡ â€“ vÅ¾dy simuluj data flow v hlavÄ› pÅ™ed kÃ³dem. ğŸ’¡
